<!--
  ~ Copyright (C) 2016 by CS ROMANIA
  ~
  ~ This program is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the Free
  ~ Software Foundation; either version 3 of the License, or (at your option)
  ~ any later version.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
  ~ more details.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, see http://www.gnu.org/licenses/
  -->

<html>
<head>
    <title>SNAP Forest Cover Change Processor</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" href="style.css">
</head>

<body>
<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            Forest Cover Change Processor</td>
        <td class="header" align="right"><a href="nbdocs://org.esa.snap.snap.help/org/esa/snap/snap/help/docs/general/overview/SnapOverview.html"><img src="images/snap_header.jpg" border=0></a></td>
    </tr>
</table>

<p><br/></p>
<p>
    The Forest Cover Change Processor is a multi-steps iterative process that transform two date images into two forest/non forest products and an independent tropical forest change one.
    The overall principle of the algorithm is to identify the forest objects showing higher reflectance differences between the two images than the other forest objects.
</p>
<p>
    The memory required to process the images may be very high and therefore leads to unfeasibility on slow computers.
</p>
<p>
    The two major steps are:
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (i) a multi-date multispectral image segmentation and
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (ii) a change detection procedure including:
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    - a binary forest/non forest classification of the clusters composed of a selection of forest training set based on a reference map, a multivariate iterative
    trimming to remove the outliers, and a spectral analysis based on the Mahalanobis distance;
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    - a change detection under a forest mask generated by the union of forest classification of both dates.
</p>
<p>
    The processing chain is run by pairs of images. Each product must contain at least 4 bands with the following spectral wave length:
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    RED: 0.63 um - 0.69 um
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    NIR: 0.76 um - 0.9 um
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    SWIR: 1.55 um - 1.75 um
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    SWIR: 2.08 um - 2.35 um
</p>
<p>
    Forest masks are produced in two major steps:
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (i) A forest training set is created with the objects covered by 95% of Tree cover class excrated from a reference map
    (<a href="http://maps.elie.ucl.ac.be/CCI/viewer/index.php">originally CCI Land Cover map</a>):
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    - Segmentation objects are first converted into raster pixels.
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    - Tree cover label from recent and old images objects rasterized (same objects for both dates) are extracted from the reference map. For the CCI Land Cover legend, Tree Cover labels are [40, 50, 60, 61, 62, 70, 71, 72, 80, 81, 82, 90, 100, 110, 160, 170].
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    - Areas statistics are then computed and objects with at least 95% Tree cover are selected for the forest/non forest mask training set. This method allows to have set of homogeneous tree cover objects.</p>
</p>
<p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    (ii) The training set will be updated using the a trimming procedure based on the Mahalanobis distance to remove the extreme values that behave like outliers.
</p>

<h4>I/O Parameters</h4>
<table border="0">
    <tr>
        <td style="border-width:0;" valign="top">
            <h5>Source Products</h5>

            <p class="i1">
                <b>Current Source Product</b>
                Specify the current source product which will be used to compute the forest cover change.
            </p>
            <p class="i1">
                <b>Previous Source Product</b>
                Specify the previous source product which will be used to compute the forest cover change.
            </p>
            <p>
                <b>NOTE:</b> The two input products must have the same geo-spatial latitude and longitude and the same raster sizes.
            </p>

            <h5>Target Product</h5>
            <p class="i1">
                <b>Name:</b>
                Used to specify the name of the target product.
            </p>

            <p class="i1">
                <b>Save as:</b>
                Used to specify whether the target product should be saved to the file system. The
                combo box presents a list of file formats, currently BEAM-DIMAP, GeoTIFF, and HDF5.
                The text field allows to specify a target directory. <br>
            </p>

            <p class="i1">
                <b>Open in SNAP:</b>
                Used to specify whether the target product should be opened in the Sentinel Toolbox.
                When the target product is not saved, it is opened in the Sentinel Toolbox automatically.
            </p></td>
        <td style="border-width:0;" valign="top">
            <img src="images/io-parameters.png">
        </td>
    </tr>
</table>

<h4>Processing Parameters</h4>
<table border="0">
    <tr>
        <td style="border-width:0;" valign="top">
            <p class="i1">
                <b>Forest cover percentage:</b>
                Specify the  forest cover percentage for each segmentation object.
            </p>
            <p class="i1">
                <b>Merging cost criterion:</b>
                Specify the type to compute the cost between adjacent segments. The merging costs are based on a homogeneity criterion and can represent
                not only how two similar segmentss are but also how homogeneous the resulting larger segment would be.
            </p>

            <p class="i1">
                <b>Region merging criterion:</b>
                Specify for a given segment the way to choose the adjacent segment to be merged with.
            </p>

            <p class="i1">
                <b>Total iterations:</b>
                Specify the total number of iterations.
            </p>

            <p class="i1">
                <b>Threshold:</b>
                Specify the threshold which is compared with the merging cost. This thereshold avoids undersegmentation.
            </p>

            <p class="i1">
                <b>Spectral weight:</b>
                Specify the spectral weight.
            </p>

            <p class="i1">
                <b>Shape weight:</b>
                Specify the shape weight.
            </p>
            <p>
                <b>NOTE:</b> The threshold, spectral weight, shape weight may vary according to the pixel values of the raster. The standard values for spectral weight, shape weight is 0.5
                and for threshold is 100. Sometimes to detect more precisely the segmentation objects the processor needs to execute several times with different parameter values.
            </p>
        </td>
        <td style="border-width:0;" valign="top">
            <img src="images/processing-parameters.png">
        </td>
    </tr>
</table>

<hr>
</body>
</html>
